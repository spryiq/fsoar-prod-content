{
    "@context": "\/api\/3\/contexts\/Workflow",
    "@type": "Workflow",
    "triggerLimit": null,
    "name": "Bajaj-Report In CSV",
    "aliasName": null,
    "tag": null,
    "description": null,
    "isActive": true,
    "debug": true,
    "singleRecordExecution": false,
    "remoteExecutableFlag": false,
    "parameters": [],
    "synchronous": false,
    "collection": "\/api\/3\/workflow_collections\/33f0ab21-60d4-4f9b-8178-a795be8399db",
    "versions": [],
    "triggerStep": "\/api\/3\/workflow_steps\/1d092a1d-f25a-4787-a887-694e7fee4c89",
    "steps": [
        {
            "@type": "WorkflowStep",
            "name": "Calculate MTTR",
            "description": null,
            "arguments": {
                "mean_time_to_resolve": "{% set l1 = [] %}{% set num = vars.mttrAlertList | length %}{% for i in vars.mttrAlertList %}{% set res = i['resolveddate'] - i['createDate'] %}{% do l1.append(res) %}{% endfor %}{% set sumation = l1 | sum  | abs%}{% set total_days = sumation \/ num \/ 60 \/ 60 \/ 24 %}{% set days = total_days | int %}{% set hours = (total_days - days) * 24 %}{% set minutes = (hours - hours | int) * 60 %}{% set seconds = (minutes - minutes|int) * 60%}{%if days > 0 %}{{ days }} days {{ hours | int }} hours {{minutes| round(0)}} minutes{%elif hours > 0%}{{hours | int}} hours {{minutes | round(0)}} minutes {%elif minutes > 0%} {{minutes | int}} minutes {{seconds | round(0)}} seconds {%else%}{{seconds| round(0)}} {%endif%}"
            },
            "status": null,
            "top": "570",
            "left": "1350",
            "stepType": "\/api\/3\/workflow_step_types\/04d0cf46-b6a8-42c4-8683-60a7eaa69e8f",
            "group": null,
            "uuid": "1bb4dacc-a1e9-4208-a0c9-1d54c42a473e"
        },
        {
            "@type": "WorkflowStep",
            "name": "Copy of Mtta Calculations",
            "description": null,
            "arguments": {
                "mean_time_to_ack": "{% set l1 = [] %}{% set num = vars.mttrAlertList | length %}{% for i in vars.mttrAlertList %}{% set cal = i['ackDate'] - i['createDate'] %}{% do l1.append(cal) %}{% endfor %}{% set res = l1 | sum | abs %}{% set total_days = res \/ num \/ 60 \/ 60 \/ 24 %}{% set days = total_days | int %}{% set hours = (total_days - days) * 24 %}{% set minutes = (hours - hours | int) * 60 %}{%if days > 0 %}{{ days }} days {{ hours | int }} hours {{minutes| round(0)}} minutes{%elif hours > 0%}{{hours | int}} hours {{minutes | round(0)}} minutes {%elif minutes > 0%} {{minutes | int}} minutes {{seconds | round(0)}} seconds {%else%}{{seconds| round(0)}} {%endif%}"
            },
            "status": null,
            "top": "30",
            "left": "125",
            "stepType": "\/api\/3\/workflow_step_types\/04d0cf46-b6a8-42c4-8683-60a7eaa69e8f",
            "group": null,
            "uuid": "c350e70b-d61d-4dde-854a-fdb62f0bb6f0"
        },
        {
            "@type": "WorkflowStep",
            "name": "Copy of Python Code",
            "description": null,
            "arguments": {
                "config": "b5195722-9917-4e6e-ac0f-cddab46620ee",
                "params": {
                    "python_function": "import pandas as pd\r\nimport json\r\nimport datetime\r\n\r\nct = datetime.datetime.utcnow()\r\nformatted_ct = ct.strftime('%Y-%m-%d %H:%M:%S') + ' UTC'\r\nmtta = \"{{vars.mean_time_to_ack}}\"\r\nmttr = \"{{vars.mean_time_to_resolve}}\"\r\nsummary = [\r\n    ['Monthly Alerts Report', ''],\r\n    [\"Monthly Alerts Report Created On\", formatted_ct],\r\n    ['Total Number Of Automated Use Cases', 10],\r\n    [\"Number Of Mitigated Alerts\", \"{{vars.mitigated_alerts_count}}\"],\r\n    [\"Mean Time To Acknowledge\", mtta],\r\n    [\"Mean Time To Detect\", mtta],\r\n    [\"Mean Time To Resolve\", mttr]\r\n]\r\n\r\n# Convert summary into DataFrame\r\nsummary_df = pd.DataFrame(summary)\r\n\r\n# Convert 'steps.Get_times' into a DataFrame\r\ndf = pd.json_normalize({{vars.steps.Get_Alert_Details}})\r\n\r\n# Select relevant columns and rename them\r\ndf = df[['id', 'name', 'ack_time', 'created_on', 'response_time', 'status', 'severity']]\r\ndf = df.rename(columns={\r\n    'id': 'ID',\r\n    'name': 'NAME',\r\n    'ack_time': 'ACK DATE',\r\n    'created_on': 'CREATED ON',\r\n    'response_time': 'RESPONSE DATE',\r\n    'severity': 'SEVERITY',\r\n    'status': 'STATUS'\r\n})\r\n\r\n# Write summary and alert details to CSV\r\nwith open(\"\/tmp\/Monthly_Alert_Report.csv\", \"w\") as file:\r\n    # Write summary DataFrame to file without index\r\n    summary_df.to_csv(file, index=False, header=False)\r\n    file.write(\"\\n\")  # Add a newline between sections\r\n    \r\n    # Add a title for the next section\r\n    file.write(\"Alert Details\\n\")\r\n    \r\n    # Write details DataFrame to file without index\r\n    df.to_csv(file, index=False, header=True)\r\n"
                },
                "version": "2.1.3",
                "connector": "code-snippet",
                "operation": "python_inline_code_editor",
                "operationTitle": "Execute Python Code",
                "step_variables": []
            },
            "status": null,
            "top": "30",
            "left": "475",
            "stepType": "\/api\/3\/workflow_step_types\/1fdd14cc-d6b4-4335-a3af-ab49c8ed2fd8",
            "group": null,
            "uuid": "21dd77d7-2798-4c33-bd10-9dbb98702ac4"
        },
        {
            "@type": "WorkflowStep",
            "name": "Create Attachment",
            "description": null,
            "arguments": {
                "params": {
                    "name": "Bajaj Alert Report",
                    "filename": "\/tmp\/Monthly_Alert_Report.csv",
                    "description": "",
                    "request_headers": "",
                    "multipart_headers": "",
                    "extra_multipart_fields": ""
                },
                "version": "3.5.0",
                "connector": "cyops_utilities",
                "operation": "create_cyops_attachment",
                "operationTitle": "File: Create Attachment from File",
                "step_variables": []
            },
            "status": null,
            "top": "1245",
            "left": "1175",
            "stepType": "\/api\/3\/workflow_step_types\/0109f35d-090b-4a2b-bd8a-94cbc3508562",
            "group": null,
            "uuid": "34790de5-026d-4ea0-a61a-28767a49ed6b"
        },
        {
            "@type": "WorkflowStep",
            "name": "Delete attachment",
            "description": null,
            "arguments": {
                "params": {
                    "iri": "{{vars.steps.Find_Attachment[0]['@id']}}",
                    "body": "",
                    "method": "DELETE"
                },
                "version": "3.5.0",
                "connector": "cyops_utilities",
                "operation": "make_cyops_request",
                "operationTitle": "FSR: Make FortiSOAR API Call",
                "step_variables": []
            },
            "status": null,
            "top": "1650",
            "left": "1175",
            "stepType": "\/api\/3\/workflow_step_types\/0109f35d-090b-4a2b-bd8a-94cbc3508562",
            "group": null,
            "uuid": "46f4433e-ceec-4732-811c-bc0c82f566ff"
        },
        {
            "@type": "WorkflowStep",
            "name": "Delete File",
            "description": null,
            "arguments": {
                "params": {
                    "iri": "{{vars.steps.Find_Attachment[0].file['@id']}}",
                    "body": "",
                    "method": "DELETE"
                },
                "version": "3.5.0",
                "connector": "cyops_utilities",
                "operation": "make_cyops_request",
                "operationTitle": "FSR: Make FortiSOAR API Call",
                "step_variables": []
            },
            "status": null,
            "top": "1785",
            "left": "1175",
            "stepType": "\/api\/3\/workflow_step_types\/0109f35d-090b-4a2b-bd8a-94cbc3508562",
            "group": null,
            "uuid": "ba543332-2c7a-4c7c-bbf2-463355647d65"
        },
        {
            "@type": "WorkflowStep",
            "name": "END",
            "description": null,
            "arguments": {
                "params": [],
                "version": "3.5.0",
                "connector": "cyops_utilities",
                "operation": "no_op",
                "operationTitle": "Utils: No Operation",
                "step_variables": []
            },
            "status": null,
            "top": "1920",
            "left": "1175",
            "stepType": "\/api\/3\/workflow_step_types\/0109f35d-090b-4a2b-bd8a-94cbc3508562",
            "group": null,
            "uuid": "e29da002-083b-459d-bd36-59818bb355da"
        },
        {
            "@type": "WorkflowStep",
            "name": "Find Attachment",
            "description": null,
            "arguments": {
                "query": {
                    "sort": [],
                    "limit": 30,
                    "logic": "AND",
                    "filters": [
                        {
                            "type": "primitive",
                            "field": "name",
                            "value": "%Bajaj Alert Report%",
                            "operator": "like",
                            "_operator": "like"
                        }
                    ]
                },
                "module": "attachments?$limit=30",
                "step_variables": []
            },
            "status": null,
            "top": "1380",
            "left": "1175",
            "stepType": "\/api\/3\/workflow_step_types\/b593663d-7d13-40ce-a3a3-96dece928770",
            "group": null,
            "uuid": "62c2a8c2-e3b4-484c-a314-219f2b839446"
        },
        {
            "@type": "WorkflowStep",
            "name": "Get Ack alerts",
            "description": null,
            "arguments": {
                "query": {
                    "sort": [],
                    "limit": 30,
                    "logic": "AND",
                    "filters": [
                        {
                            "type": "datetime",
                            "field": "ackDate",
                            "value": "false",
                            "operator": "isnull"
                        },
                        {
                            "type": "datetime",
                            "logic": "AND",
                            "_field": "createDate",
                            "_value": {
                                "differenceType": "days",
                                "differenceValue": -30
                            },
                            "filters": [
                                {
                                    "type": "datetime",
                                    "field": "createDate",
                                    "value": "{{getRelativeDate(0,0,-30,\"start\",\"start\",\"start\")}}",
                                    "operator": "gte"
                                },
                                {
                                    "type": "datetime",
                                    "field": "createDate",
                                    "value": "{{getRelativeDate(0,0,0,0,0,0)}}",
                                    "operator": "lte"
                                }
                            ],
                            "_operator": "date"
                        }
                    ]
                },
                "module": "alerts?$limit=30",
                "step_variables": []
            },
            "status": null,
            "top": "30",
            "left": "825",
            "stepType": "\/api\/3\/workflow_step_types\/b593663d-7d13-40ce-a3a3-96dece928770",
            "group": null,
            "uuid": "d6b425b2-421c-41d5-b5ee-c33d237dc57a"
        },
        {
            "@type": "WorkflowStep",
            "name": "Get Alert Details",
            "description": null,
            "arguments": {
                "id": "{{vars.item.id}}",
                "name": "{{vars.item.name}}",
                "status": "{{vars.item.status.itemValue}}",
                "ack_time": "{%if vars.item.ackDate is not none%}{{arrow.get(vars.item.ackDate).to(\"UTC\").format(\"YYYY-MM-DD HH:mm:ss ZZ\")}}{%else%}{{'-N\/A-'}}{%endif%}",
                "for_each": {
                    "item": "{{vars.steps.Get_Alerts|flatten}}",
                    "parallel": false,
                    "condition": ""
                },
                "severity": "{{vars.item.severity.itemValue}}",
                "created_on": "{%if vars.item.createDate is not none%}{{arrow.get(vars.item.createDate).to(\"UTC\").format(\"YYYY-MM-DD HH:mm:ss ZZ\")}}{%else%}{{'-N\/A-'}}{%endif%}",
                "response_time": "{%if vars.item.respDate is not none%}{{arrow.get(vars.item.respDate).to(\"UTC\").format(\"YYYY-MM-DD HH:mm:ss ZZ\")}}{%else%}{{'-N\/A-'}}{%endif%}"
            },
            "status": null,
            "top": "975",
            "left": "1000",
            "stepType": "\/api\/3\/workflow_step_types\/04d0cf46-b6a8-42c4-8683-60a7eaa69e8f",
            "group": null,
            "uuid": "9852720b-715d-4ac8-ad08-80d454e1a6b6"
        },
        {
            "@type": "WorkflowStep",
            "name": "Get Alerts",
            "description": null,
            "arguments": {
                "query": {
                    "sort": [],
                    "limit": 30,
                    "logic": "AND",
                    "filters": [
                        {
                            "type": "datetime",
                            "field": "createDate",
                            "value": "{{vars.item.start}}",
                            "operator": "gte"
                        },
                        {
                            "type": "datetime",
                            "field": "createDate",
                            "value": "{{vars.item.end}}",
                            "operator": "lte"
                        }
                    ]
                },
                "module": "alerts?$limit=5000",
                "for_each": {
                    "item": "{{vars.getEpochs}}",
                    "parallel": false,
                    "condition": ""
                },
                "checkboxFields": false,
                "step_variables": []
            },
            "status": null,
            "top": "705",
            "left": "1000",
            "stepType": "\/api\/3\/workflow_step_types\/b593663d-7d13-40ce-a3a3-96dece928770",
            "group": null,
            "uuid": "0649f5e1-47f1-4ef3-837c-0ed8f67ec610"
        },
        {
            "@type": "WorkflowStep",
            "name": "Get Alerts For MTTA",
            "description": null,
            "arguments": {
                "query": {
                    "sort": [],
                    "limit": 30,
                    "logic": "AND",
                    "filters": [
                        {
                            "type": "datetime",
                            "field": "createDate",
                            "value": "{{vars.item.start}}",
                            "operator": "gte"
                        },
                        {
                            "type": "datetime",
                            "field": "createDate",
                            "value": "{{vars.item.end}}",
                            "operator": "lte"
                        },
                        {
                            "type": "datetime",
                            "field": "ackDate",
                            "value": "false",
                            "operator": "isnull"
                        }
                    ]
                },
                "module": "alerts?$limit=5000",
                "for_each": {
                    "item": "{{vars.getEpochs}}",
                    "parallel": false,
                    "condition": ""
                },
                "checkboxFields": false,
                "step_variables": []
            },
            "status": null,
            "top": "705",
            "left": "1350",
            "stepType": "\/api\/3\/workflow_step_types\/b593663d-7d13-40ce-a3a3-96dece928770",
            "group": null,
            "uuid": "142050c2-0509-4850-99dd-0a5fd8479de3"
        },
        {
            "@type": "WorkflowStep",
            "name": "Get AlertsFor MTTR",
            "description": null,
            "arguments": {
                "query": {
                    "sort": [],
                    "limit": 30,
                    "logic": "AND",
                    "filters": [
                        {
                            "type": "datetime",
                            "field": "createDate",
                            "value": "{{vars.item.start}}",
                            "operator": "gte"
                        },
                        {
                            "type": "datetime",
                            "field": "createDate",
                            "value": "{{vars.item.end}}",
                            "operator": "lte"
                        },
                        {
                            "type": "datetime",
                            "field": "resolveddate",
                            "value": "false",
                            "operator": "isnull"
                        }
                    ]
                },
                "module": "alerts?$limit=5000",
                "for_each": {
                    "item": "{{vars.getEpochs}}",
                    "parallel": false,
                    "condition": ""
                },
                "checkboxFields": false,
                "step_variables": []
            },
            "status": null,
            "top": "300",
            "left": "1350",
            "stepType": "\/api\/3\/workflow_step_types\/b593663d-7d13-40ce-a3a3-96dece928770",
            "group": null,
            "uuid": "8d89937b-b5b9-4442-9a21-f8d4b8fcfdca"
        },
        {
            "@type": "WorkflowStep",
            "name": "Get Epochs",
            "description": null,
            "arguments": {
                "getEpochs": "{% set now = arrow.utcnow().int_timestamp %}\n{% set day_seconds = 86400 %}\n{% set epoch_list = [] %}\n\n{% for i in range(30) %}  {# Iterating for 30 days #}\n  {% set epoch_item = {\n      \"start\": now - (i + 1) * day_seconds,\n      \"end\": now - i * day_seconds\n  } %}\n  {% do epoch_list.append(epoch_item) %}\n{% endfor %}\n\n{{ epoch_list }}"
            },
            "status": null,
            "top": "165",
            "left": "1175",
            "stepType": "\/api\/3\/workflow_step_types\/04d0cf46-b6a8-42c4-8683-60a7eaa69e8f",
            "group": null,
            "uuid": "bf9b07fe-e3a6-4845-a689-0b08bac99590"
        },
        {
            "@type": "WorkflowStep",
            "name": "Get Mitigated Alerts Count",
            "description": null,
            "arguments": {
                "query": {
                    "sort": [],
                    "limit": 30,
                    "logic": "AND",
                    "filters": [
                        {
                            "type": "object",
                            "field": "status",
                            "value": "\/api\/3\/picklists\/fac53e73-8d16-4189-98d5-95fbd1555232",
                            "_value": {
                                "@id": "\/api\/3\/picklists\/fac53e73-8d16-4189-98d5-95fbd1555232",
                                "display": "Closed",
                                "itemValue": "Closed"
                            },
                            "operator": "eq"
                        },
                        {
                            "type": "datetime",
                            "logic": "AND",
                            "_field": "createDate",
                            "_value": {
                                "differenceType": "days",
                                "differenceValue": -30
                            },
                            "filters": [
                                {
                                    "type": "datetime",
                                    "field": "createDate",
                                    "value": "{{getRelativeDate(0,0,-30,\"start\",\"start\",\"start\")}}",
                                    "operator": "gte"
                                },
                                {
                                    "type": "datetime",
                                    "field": "createDate",
                                    "value": "{{getRelativeDate(0,0,0,0,0,0)}}",
                                    "operator": "lte"
                                }
                            ],
                            "_operator": "date"
                        }
                    ]
                },
                "module": "alerts?$limit=30",
                "step_variables": []
            },
            "status": null,
            "top": "30",
            "left": "1525",
            "stepType": "\/api\/3\/workflow_step_types\/b593663d-7d13-40ce-a3a3-96dece928770",
            "group": null,
            "uuid": "6eb1fe2f-c3d6-4bde-8263-23302227e97f"
        },
        {
            "@type": "WorkflowStep",
            "name": "Get Mitigated Alerts Counts",
            "description": null,
            "arguments": {
                "Mitigated_alerts": "{{vars.steps.Get_Mitigated_Alerts_Count|length}}"
            },
            "status": null,
            "top": "165",
            "left": "1525",
            "stepType": "\/api\/3\/workflow_step_types\/04d0cf46-b6a8-42c4-8683-60a7eaa69e8f",
            "group": null,
            "uuid": "9ec89900-f226-4006-807e-cf4692711d89"
        },
        {
            "@type": "WorkflowStep",
            "name": "Mitigated Alerts Count",
            "description": null,
            "arguments": {
                "mitigated_alerts_count": "{%set count = namespace(value=0)%}{%for i in vars.steps.Get_Alerts|flatten%}{%if i['status']['itemValue'] =='Closed' %}{% set count.value = count.value + 1%}{%endif%}{%endfor%}{{count.value}}"
            },
            "status": null,
            "top": "840",
            "left": "1000",
            "stepType": "\/api\/3\/workflow_step_types\/04d0cf46-b6a8-42c4-8683-60a7eaa69e8f",
            "group": null,
            "uuid": "c2aab8ae-733c-4c1e-be8c-43ef6d53a147"
        },
        {
            "@type": "WorkflowStep",
            "name": "mtta alert list",
            "description": null,
            "arguments": {
                "mttrAlertList": "{{vars.steps.Get_Alerts_For_MTTA|flatten}}"
            },
            "status": null,
            "top": "840",
            "left": "1350",
            "stepType": "\/api\/3\/workflow_step_types\/04d0cf46-b6a8-42c4-8683-60a7eaa69e8f",
            "group": null,
            "uuid": "16949ba3-f110-499c-b31d-44a5e97fe4cc"
        },
        {
            "@type": "WorkflowStep",
            "name": "Mtta Calculations",
            "description": null,
            "arguments": {
                "mean_time_to_ack": "{% set time_differences = [] %}{% set total_alerts = vars.mttrAlertList | length %}{% for alert in vars.mttrAlertList %}{% set time_diff = alert['ackDate'] - alert['createDate'] %}{% do time_differences.append(time_diff) %}{% endfor %}{% set total_time = time_differences | sum | abs %}{% set average_time_in_days = total_time \/ total_alerts \/ 60 \/ 60 \/ 24 %}{% set days = average_time_in_days | int %}{% set hours = (average_time_in_days - days) * 24 %}{% set minutes = (hours - hours | int) * 60 %}{% if days > 0 %}{{ days }} days {{ hours | int }} hours {{ minutes | round(0) }} minutes{% elif hours > 0 %}{{ hours | int }} hours {{ minutes | round(0) }} minutes{% elif minutes > 0 %}{{ minutes | int }} minutes {{ seconds | round(0) }} seconds{% else %}{{ seconds | round(0) }} seconds{% endif %}"
            },
            "status": null,
            "top": "975",
            "left": "1350",
            "stepType": "\/api\/3\/workflow_step_types\/04d0cf46-b6a8-42c4-8683-60a7eaa69e8f",
            "group": null,
            "uuid": "25fea27a-aa3f-4263-bcd8-a1674567f2a7"
        },
        {
            "@type": "WorkflowStep",
            "name": "mttr alert list",
            "description": null,
            "arguments": {
                "mttrAlertList": "{{vars.steps.Get_AlertsFor_MTTR|flatten}}"
            },
            "status": null,
            "top": "435",
            "left": "1350",
            "stepType": "\/api\/3\/workflow_step_types\/04d0cf46-b6a8-42c4-8683-60a7eaa69e8f",
            "group": null,
            "uuid": "1dea50cf-0d1d-4eef-8460-8d020032c5ed"
        },
        {
            "@type": "WorkflowStep",
            "name": "Python Code",
            "description": null,
            "arguments": {
                "config": "b5195722-9917-4e6e-ac0f-cddab46620ee",
                "params": {
                    "python_function": "import pandas as pd\r\nimport json\r\nimport datetime\r\n\r\nct = datetime.datetime.utcnow()\r\nformatted_ct = ct.strftime('%Y-%m-%d %H:%M:%S') + ' UTC'\r\nmtta = \"{{vars.mean_time_to_ack}}\"\r\nmttr = \"{{vars.mean_time_to_resolve}}\"\r\nsummary = [\r\n    ['Monthly Alerts Report', ''],\r\n    [\"Monthly Alerts Report Created On\", formatted_ct],\r\n    ['Total Number Of Automated Use Cases', 10],\r\n    [\"Number Of Mitigated Alerts\", \"{{vars.mitigated_alerts_count}}\"],\r\n    [\"Mean Time To Acknowledge\", mtta],\r\n    [\"Mean Time To Detect\", mtta],\r\n    [\"Mean Time To Resolve\", mttr]\r\n]\r\n\r\n\r\n# Convert summary into DataFrame\r\nsummary_df = pd.DataFrame(summary)\r\n\r\n# Convert 'steps.Get_times' into a DataFrame\r\ndf = pd.json_normalize({{vars.steps.Get_Alert_Details}})\r\n\r\n# Select relevant columns and rename them\r\ndf = df[['id', 'name', 'ack_time', 'created_on', 'response_time', 'status', 'severity']]\r\ndf = df.rename(columns={\r\n    'id': 'ID',\r\n    'name': 'NAME',\r\n    'ack_time': 'ACK DATE',\r\n    'created_on': 'CREATED ON',\r\n    'response_time': 'RESPONSE DATE',\r\n    'severity': 'SEVERITY',\r\n    'status': 'STATUS'\r\n})\r\n\r\n# Write summary and alert details to CSV\r\nwith open(\"\/tmp\/Monthly_Alert_Report.csv\", \"w\") as file:\r\n    # Write summary DataFrame to file without index\r\n    summary_df.to_csv(file, index=False, header=False)\r\n    file.write(\"\\n\")  # Add a newline between sections\r\n    \r\n    # Add a title for the next section\r\n    file.write(\"Alert Details\\n\")\r\n    \r\n    # Write details DataFrame to file without index\r\n    df.to_csv(file, index=False, header=True)\r\n\r\n"
                },
                "version": "2.1.3",
                "connector": "code-snippet",
                "operation": "python_inline_code_editor",
                "operationTitle": "Execute Python Code",
                "step_variables": []
            },
            "status": null,
            "top": "1110",
            "left": "1175",
            "stepType": "\/api\/3\/workflow_step_types\/1fdd14cc-d6b4-4335-a3af-ab49c8ed2fd8",
            "group": null,
            "uuid": "c24b510e-2b34-48f6-bfe5-31581974bca2"
        },
        {
            "@type": "WorkflowStep",
            "name": "Send Email",
            "description": null,
            "arguments": {
                "name": "Exchange",
                "config": "546f0b2c-7f4f-4945-87db-973eb23823fd",
                "params": {
                    "body": "<p>Hii,<\/p>\n<p>Please find attached CSV of monthly alerts report<\/p>\n<p>Regards<\/p>",
                    "subject": "Monthly Alerts Report",
                    "iri_list": "{{vars.steps.Find_Attachment[0]['@id']}}",
                    "cc_recipients": "",
                    "to_recipients": "kanchan.abute@spryiq.co",
                    "bcc_recipients": "",
                    "inline_iri_list": ""
                },
                "version": "4.5.2",
                "connector": "exchange_dev",
                "operation": "send_email",
                "operationTitle": "Send Email",
                "pickFromTenant": false,
                "step_variables": []
            },
            "status": null,
            "top": "1515",
            "left": "1175",
            "stepType": "\/api\/3\/workflow_step_types\/0bfed618-0316-11e7-93ae-92361f002671",
            "group": null,
            "uuid": "94fba330-807f-4352-a4ec-a77082694be3"
        },
        {
            "@type": "WorkflowStep",
            "name": "Start",
            "description": null,
            "arguments": {
                "route": "407f5167-7a9e-42d3-a478-568606c93cd6",
                "resources": [
                    "alerts"
                ],
                "__triggerLimit": true,
                "inputVariables": [],
                "step_variables": {
                    "input": {
                        "params": [],
                        "records": "{{vars.input.records}}"
                    }
                },
                "triggerOnSource": true,
                "executeButtonText": "Execute",
                "noRecordExecution": true,
                "showToasterMessage": {
                    "visible": false,
                    "messageVisible": true
                },
                "triggerOnReplicate": false,
                "singleRecordExecution": false
            },
            "status": null,
            "top": "30",
            "left": "1175",
            "stepType": "\/api\/3\/workflow_step_types\/f414d039-bb0d-4e59-9c39-a8f1e880b18a",
            "group": null,
            "uuid": "1d092a1d-f25a-4787-a887-694e7fee4c89"
        }
    ],
    "routes": [
        {
            "@type": "WorkflowRoute",
            "name": "Alert Details -> Get times",
            "targetStep": "\/api\/3\/workflow_steps\/9852720b-715d-4ac8-ad08-80d454e1a6b6",
            "sourceStep": "\/api\/3\/workflow_steps\/c2aab8ae-733c-4c1e-be8c-43ef6d53a147",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "145ec15a-aa66-46d9-878f-f860b4d74263"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Calculate MTTR -> Get Alerts For MTTA",
            "targetStep": "\/api\/3\/workflow_steps\/142050c2-0509-4850-99dd-0a5fd8479de3",
            "sourceStep": "\/api\/3\/workflow_steps\/1bb4dacc-a1e9-4208-a0c9-1d54c42a473e",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "6cfa2335-2b81-4dc0-ae26-b6c207433a81"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Copy of Get Alerts -> mttr alert list",
            "targetStep": "\/api\/3\/workflow_steps\/16949ba3-f110-499c-b31d-44a5e97fe4cc",
            "sourceStep": "\/api\/3\/workflow_steps\/142050c2-0509-4850-99dd-0a5fd8479de3",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "d86d4faf-f72b-4ad2-b866-297a66bba15c"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Create Attachment -> Find Attachment",
            "targetStep": "\/api\/3\/workflow_steps\/62c2a8c2-e3b4-484c-a314-219f2b839446",
            "sourceStep": "\/api\/3\/workflow_steps\/34790de5-026d-4ea0-a61a-28767a49ed6b",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "2c6a0030-ed57-4c9a-bd06-ab94ea9958fb"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Delete attachment -> Delete File",
            "targetStep": "\/api\/3\/workflow_steps\/ba543332-2c7a-4c7c-bbf2-463355647d65",
            "sourceStep": "\/api\/3\/workflow_steps\/46f4433e-ceec-4732-811c-bc0c82f566ff",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "fc289b5f-1514-4020-bbd3-5e8250b2ec8a"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Delete File -> END",
            "targetStep": "\/api\/3\/workflow_steps\/e29da002-083b-459d-bd36-59818bb355da",
            "sourceStep": "\/api\/3\/workflow_steps\/ba543332-2c7a-4c7c-bbf2-463355647d65",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "32c9f031-eb89-449e-84b1-5a0dedfcf3e4"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Find Attachment -> Send Email",
            "targetStep": "\/api\/3\/workflow_steps\/94fba330-807f-4352-a4ec-a77082694be3",
            "sourceStep": "\/api\/3\/workflow_steps\/62c2a8c2-e3b4-484c-a314-219f2b839446",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "904ed027-ac54-408a-882a-9ac9d46d8ba9"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Get Alert Details -> Python Code",
            "targetStep": "\/api\/3\/workflow_steps\/c24b510e-2b34-48f6-bfe5-31581974bca2",
            "sourceStep": "\/api\/3\/workflow_steps\/9852720b-715d-4ac8-ad08-80d454e1a6b6",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "6e418cd7-e3fc-4b0f-9f9c-1ec89774058c"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Get Alerts -> Alert Details",
            "targetStep": "\/api\/3\/workflow_steps\/c2aab8ae-733c-4c1e-be8c-43ef6d53a147",
            "sourceStep": "\/api\/3\/workflow_steps\/0649f5e1-47f1-4ef3-837c-0ed8f67ec610",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "7638557f-8742-4eb0-be58-55f0714ddcf9"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Get AlertsFor MTTR -> mttr alert list",
            "targetStep": "\/api\/3\/workflow_steps\/1dea50cf-0d1d-4eef-8460-8d020032c5ed",
            "sourceStep": "\/api\/3\/workflow_steps\/8d89937b-b5b9-4442-9a21-f8d4b8fcfdca",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "35979592-205d-4dfb-aa80-655c8410dbe5"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Get Epochs -> Get Alerts",
            "targetStep": "\/api\/3\/workflow_steps\/0649f5e1-47f1-4ef3-837c-0ed8f67ec610",
            "sourceStep": "\/api\/3\/workflow_steps\/bf9b07fe-e3a6-4845-a689-0b08bac99590",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "d70c90d5-1c88-4e3e-8ba3-072e1b213a9e"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Get Epochs -> Get AlertsFor MTTR",
            "targetStep": "\/api\/3\/workflow_steps\/8d89937b-b5b9-4442-9a21-f8d4b8fcfdca",
            "sourceStep": "\/api\/3\/workflow_steps\/bf9b07fe-e3a6-4845-a689-0b08bac99590",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "0ba59735-63eb-4f1a-acc5-5899873d9b40"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Get Mitigated Alerts Count -> Get Required Data",
            "targetStep": "\/api\/3\/workflow_steps\/9ec89900-f226-4006-807e-cf4692711d89",
            "sourceStep": "\/api\/3\/workflow_steps\/6eb1fe2f-c3d6-4bde-8263-23302227e97f",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "9c3b4a17-f52a-4b2d-8197-439b1a235e3b"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Mtta Calculations -> Python Code",
            "targetStep": "\/api\/3\/workflow_steps\/c24b510e-2b34-48f6-bfe5-31581974bca2",
            "sourceStep": "\/api\/3\/workflow_steps\/25fea27a-aa3f-4263-bcd8-a1674567f2a7",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "956806eb-5b01-447d-87e8-b0b2fa92bab2"
        },
        {
            "@type": "WorkflowRoute",
            "name": "mttr alert list -> Calculate MTTR",
            "targetStep": "\/api\/3\/workflow_steps\/1bb4dacc-a1e9-4208-a0c9-1d54c42a473e",
            "sourceStep": "\/api\/3\/workflow_steps\/1dea50cf-0d1d-4eef-8460-8d020032c5ed",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "fa185e7d-e82b-413b-a80d-bf9275761792"
        },
        {
            "@type": "WorkflowRoute",
            "name": "mttr alert list -> Mtta Calculations",
            "targetStep": "\/api\/3\/workflow_steps\/25fea27a-aa3f-4263-bcd8-a1674567f2a7",
            "sourceStep": "\/api\/3\/workflow_steps\/16949ba3-f110-499c-b31d-44a5e97fe4cc",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "bb679dde-f0ed-4fb4-8684-9529d9d0f0f0"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Python Code -> Create Attachment",
            "targetStep": "\/api\/3\/workflow_steps\/34790de5-026d-4ea0-a61a-28767a49ed6b",
            "sourceStep": "\/api\/3\/workflow_steps\/c24b510e-2b34-48f6-bfe5-31581974bca2",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "929a1790-855b-49a2-ae7e-6465606dea77"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Send Email -> Delete attachment",
            "targetStep": "\/api\/3\/workflow_steps\/46f4433e-ceec-4732-811c-bc0c82f566ff",
            "sourceStep": "\/api\/3\/workflow_steps\/94fba330-807f-4352-a4ec-a77082694be3",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "017f6e92-8d40-4aa2-829f-47b1812c0e53"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Start -> Get Epochs",
            "targetStep": "\/api\/3\/workflow_steps\/bf9b07fe-e3a6-4845-a689-0b08bac99590",
            "sourceStep": "\/api\/3\/workflow_steps\/1d092a1d-f25a-4787-a887-694e7fee4c89",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "89294c27-3b23-42ea-a597-b21f9fe85dba"
        }
    ],
    "groups": [],
    "priority": "\/api\/3\/picklists\/2b563c61-ae2c-41c0-a85a-c9709585e3f2",
    "playbookOrigin": "\/api\/3\/picklists\/15c1e8c9-22bf-4e66-8fbb-0a502d4a4a3f",
    "isEditable": true,
    "uuid": "b4579ba8-f49b-49a0-bbf7-86d6c5301c14",
    "owners": [],
    "isPrivate": false,
    "deletedAt": null,
    "recordTags": []
}